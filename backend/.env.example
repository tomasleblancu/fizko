# ============================================
# Backend V2 - Environment Variables
# ============================================

# ==========================================
# Supabase Configuration (REQUIRED)
# ==========================================
# Used by application for data access via Supabase client
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-role-key

# ==========================================
# OpenAI Configuration (REQUIRED)
# ==========================================
# For AI agents
OPENAI_API_KEY=sk-your-openai-api-key

# ==========================================
# Celery Configuration
# ==========================================
# Redis broker for Celery tasks
# - Local development: redis://localhost:6379/0
# - Docker: redis://redis:6379/0
# - Production (Upstash): redis://:password@us1-xxx.upstash.io:6379
REDIS_URL=redis://localhost:6379/0

# PostgreSQL for Beat scheduler (REQUIRED for celery-beat only)
# IMPORTANT: Use dedicated Railway PostgreSQL (NOT Supabase)
# - Why dedicated? Avoids conflicts with application tables
# - Railway provides free PostgreSQL with automatic backups
# - Format: postgresql://user:pass@host:5432/database
DATABASE_URL=postgresql://user:password@containers-us-west-xxx.railway.app:5432/railway

# Celery Worker Settings (optional)
CELERY_CONCURRENCY=2
CELERY_LOG_LEVEL=info

# ==========================================
# Application Settings
# ==========================================
# Environment (development, staging, production)
ENVIRONMENT=development

# Port for FastAPI (default: 8000)
PORT=8000

# Workers for Uvicorn (production only)
WORKERS=1

# ==========================================
# SII Integration (optional)
# ==========================================
# Encryption key for storing SII credentials
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your-32-byte-hex-key

# ==========================================
# ngrok Configuration (development only)
# ==========================================
# For webhook development
NGROK_AUTHTOKEN=your-ngrok-token

# ==========================================
# Notes
# ==========================================
# 1. DATABASE_URL is ONLY for Beat scheduler (sqlalchemy-celery-beat)
#    Tasks use Supabase client (SUPABASE_URL), NOT DATABASE_URL
#
# 2. For production, use external services:
#    - PostgreSQL: Railway (for Beat)
#    - Redis: Upstash or ElastiCache
#    - Supabase: For application data
#
# 3. Never commit this file with real credentials
#    Copy to .env and add real values
