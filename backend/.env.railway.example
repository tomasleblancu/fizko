# ========================================
# RAILWAY ENVIRONMENT VARIABLES TEMPLATE
# ========================================
# Copiar estas variables a Railway dashboard
# Settings > Variables > Raw Editor
#
# IMPORTANTE: Estas son variables COMPARTIDAS entre todos los servicios
# (backend, celery-worker, celery-beat, flower)
#
# ========================================

# ========================================
# OBLIGATORIAS - REQUERIDAS PARA TODOS LOS SERVICIOS
# ========================================

# OpenAI API (required for AI agents)
OPENAI_API_KEY=sk-proj-your-api-key-here

# Supabase (required for authentication and database)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-from-supabase-settings
SUPABASE_JWT_SECRET=your-jwt-secret-from-supabase-api-settings

# Database (Supabase PostgreSQL)
# IMPORTANTE: Usar puerto 6543 (pgbouncer) para producción
DATABASE_URL=postgresql+asyncpg://postgres:your-password@db.your-project.supabase.co:6543/postgres

# Encryption Key (for SII passwords)
# Generar con: python -c "import base64; import os; print(base64.urlsafe_b64encode(os.urandom(32)).decode())"
ENCRYPTION_KEY=your-32-byte-base64-encoded-key-here

# Redis (AUTO-CONFIGURADO POR RAILWAY PLUGIN)
# IMPORTANTE: NO poner valor manual, Railway lo configura automáticamente
# cuando agregas el Redis Plugin. Usar esta variable referenciada:
REDIS_URL=${{Redis.REDIS_URL}}

# ========================================
# CONFIGURACIÓN DE ENTORNO
# ========================================

# Environment
ENVIRONMENT=production

# CORS Origins (comma-separated)
# Agregar dominio de tu frontend aquí
ALLOWED_ORIGINS=https://tu-frontend.vercel.app,https://demo.fizko.ai

# ========================================
# CELERY CONFIGURATION
# ========================================

# Log level para Celery (debug, info, warning, error)
CELERY_LOG_LEVEL=info

# Concurrencia de Celery Worker (número de procesos)
# Railway Starter: 2, Railway Pro: 4-8
CELERY_CONCURRENCY=2

# Máximo de tareas por worker antes de restart
CELERY_MAX_TASKS_PER_CHILD=1000

# ========================================
# CHATKIT / AI AGENTS
# ========================================

# Modo de operación del sistema de agentes
# Opciones: "multi_agent" (default) | "unified" | "supervisor"
CHATKIT_MODE=multi_agent

# ========================================
# INTEGRACIÓN KAPSO (WhatsApp Business)
# ========================================

# Kapso API Token (obtener de https://app.kapso.ai)
KAPSO_API_TOKEN=your-kapso-api-token-here

# Kapso API Base URL
KAPSO_API_BASE_URL=https://app.kapso.ai/api/v1

# Kapso Webhook Secret (para validar webhooks)
KAPSO_WEBHOOK_SECRET=your-webhook-secret-here

# ========================================
# OPCIONALES - MONITORING Y DEBUG
# ========================================

# Sentry DSN (error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Log Level general de la aplicación
# LOG_LEVEL=info

# ========================================
# NOTAS IMPORTANTES
# ========================================
#
# 1. REDIS_URL:
#    - Railway lo configura automáticamente cuando agregas el Redis Plugin
#    - Usar: ${{Redis.REDIS_URL}} (con doble llave)
#    - NO poner URL manual
#
# 2. DATABASE_URL:
#    - Usar puerto 6543 (pgbouncer) para producción
#    - Mejor performance con connection pooling
#
# 3. Variables compartidas:
#    - Todas estas variables se comparten entre los 4 servicios
#    - No necesitas duplicarlas por servicio
#
# 4. Secrets:
#    - Railway encripta todas las variables automáticamente
#    - No commitear este archivo con valores reales
#
# 5. PORT:
#    - NO definir PORT, Railway lo asigna automáticamente
#    - Backend y Flower lo detectan automáticamente
#
# 6. Actualizar valores:
#    - Cambiar variables en Railway dashboard
#    - Railway redeploya automáticamente todos los servicios
#
# ========================================
# CÓMO AGREGAR ESTAS VARIABLES EN RAILWAY
# ========================================
#
# Opción 1: Raw Editor (Recomendado)
# 1. Ir a Railway Dashboard
# 2. Seleccionar tu proyecto
# 3. Click en "Settings"
# 4. Click en "Variables" tab
# 5. Click en "Raw Editor"
# 6. Copiar y pegar todas estas variables
# 7. Reemplazar los valores de ejemplo con los reales
# 8. Click "Save"
#
# Opción 2: Una por una
# 1. Ir a Railway Dashboard
# 2. Seleccionar tu proyecto
# 3. Click en "Settings" > "Variables"
# 4. Click "+ New Variable"
# 5. Agregar nombre y valor
# 6. Repetir para cada variable
#
# ========================================
# VERIFICAR CONFIGURACIÓN
# ========================================
#
# Después de configurar las variables:
# 1. Ir a cada servicio (backend, worker, beat, flower)
# 2. Click en "Variables" tab
# 3. Verificar que todas las variables aparecen
# 4. Si falta alguna, agregarla en el nivel de proyecto
#
# ========================================
